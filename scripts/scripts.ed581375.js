"use strict";angular.module("arkhamHelperApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","underscore","ui.sortable","Shuffler","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/investigator",{templateUrl:"views/investigator.html",controller:"InvestigatorCtrl"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("arkhamHelperApp").controller("MainCtrl",["$scope",function(){}]),angular.module("arkhamHelperApp").controller("AboutCtrl",["$scope",function(){}]),angular.module("arkhamHelperApp").directive("investigator",function(){return{templateUrl:"views/templates/investigatorDirective.html",restrict:"E",scope:{inv:"=",first:"=",current:"="}}}),angular.module("arkhamHelperApp").controller("InvestigatorCtrl",["$scope","activeInvestigators","phase",function(a,b,c){a.investigators=b.list,a.phase=c}]),angular.module("arkhamHelperApp").directive("plusMinus",function(){return{templateUrl:"views/templates/plusMinus.html",restrict:"E",scope:{value:"=",size:"@",show:"@",max:"=?"},link:function(a,b){angular.isDefined(a.max)&&a.$watch("max",function(b,c){c>b&&a.value>b&&(a.value=b)}),a.plus=function(){angular.isDefined(a.max)&&a.value>=a.max||(a.value=a.value+1)},a.minus=function(){a.value<=0||(a.value=a.value-1)},b.children().addClass(a.size)}}}),angular.module("arkhamHelperApp").directive("skillTuple",function(){return{templateUrl:"views/templates/skilltupleDirective.html",restrict:"E",scope:{first:"@",second:"@",inv:"=",availableFocus:"="},link:function(a){a.selected=-1;{var b=a.inv,c=a.first;a.second}a.select=function(d){var e=Math.abs(a.selected-d);e>a.availableFocus||(a.availableFocus=a.availableFocus-e,b["cur"+c]=b["min"+c]+d,a.selected=d)},a.selected=b["cur"+c]-b["min"+c]}}}),angular.module("arkhamHelperApp").value("investigatorsData",[{image:"AmandaSharpeCard.png",name:"Amanda Sharpe",profession:"Student",money:1,curSanity:5,maxSanity:5,curStamina:5,maxStamina:5,clues:1,home:"Bank of Arkham",focus:3,specialAbilityTitle:"Studious",specialAbilityDescription:"Whenever Amanda draws one or more cards from the Skill deck, she draws one extra card and then discards one of the cards.",minSpeed:1,minSneak:1,minFight:1,minWill:1,minLore:1,minLuck:1,curSpeed:1,curFight:1,curLore:1},{image:"AshcanPeteCard.png",name:'"Ashcan" Pete',profession:"the Drifter",money:1,curSanity:4,maxSanity:4,curStamina:6,maxStamina:6,home:"River Docks",focus:1,clues:3,specialAbilityTitle:"Scrounge",specialAbilityDescription:"When Pete draws from the Common item, Unique item, or Spell deck, he may draw from either the top or the bottom of that deck, his choice. Pete may look at the bottom card of those decks at any time.",minSpeed:0,minSneak:3,minFight:2,minWill:2,minLore:0,minLuck:0,curSpeed:0,curFight:2,curLore:0,storySoFar:"When you've lived on the streets as long as Pete has, you see things. Things that would drive braver men screaming into the night. But you also learn to be quiet, to stay hidden, and to play stupid if all else fails. It also helps to have a good dog, like Duke, to scare away the meaner elements of the street. Unfortunately, this time, Pete can't hide, and there's nothing Duke can do to protect him. His nightmares have been growing steadily worse over the last month, driving him all the way here... to Arkham. Even the whiskey isn't helping much anymore. Soon, he won't be able to sleep at all. Still, there are always opportunities for a man who knows how to stay quiet... as long as he isn't too picky."},{image:"BobJenkinsCard.png",name:"Bob Jenkins",profession:"the Salesman",money:9,curSanity:4,maxSanity:4,curStamina:6,maxStamina:6,home:"General Store",focus:1,clues:0,specialAbilityTitle:"Shrewd Dealer",specialAbilityDescription:"Any Phase: Whenever Bob draws one or more cards from the Common item deck, he draws one extra card and then discards one of the cards.",minSpeed:2,minSneak:0,minFight:1,minWill:3,minLore:0,minLuck:1,curSpeed:2,curFight:1,curLore:0,storySoFar:"As a traveling salesman, Bob is always on the go. But yesterday, he saw something that made him decide to stay in Arkham and miss his train. While he was in the General Store selling his wares, a robed man came in and bought several items, paying with old gold coins. Astounded, Bob turned to the shopkeeper for an explanation, but the man just ignored his questions, simply saying, \"That happens, sometimes.\" Now, Bob isn't leaving until he figues out where those gold coins came from. If he plays his cards right, maybe this will be the big score. Maybe he'll finally be able to retire and buy that boat he's had his eye on and spend the rest of his days fishing in a tropical paradise. Then again, moybe Bob will finally come to see that all that glitters is not gold."},{image:"CarolynFernCard.png",name:"Carolyn Fern",profession:"the Psychologist",money:7,clues:1,curSanity:6,maxSanity:6,curStamina:4,maxStamina:4,home:"Arkham Asylum",focus:2,specialAbilityTitle:"Psychology",specialAbilityDescription:"Any Phase: Dr. Fern may restore 1 Sanity to herself or another character in her location. She cannot raise a character's Sanity higher than that character's maximum Sanity.",minSpeed:0,minSneak:0,minFight:1,minWill:1,minLore:2,minLuck:2,curSpeed:0,curFight:1,curLore:2,storySoFar:"Carolyn is a first year resident at a sanitarium in Providence. Over the past six months, she has been studying the dreams of her patients using hypnosis. One patient in particular gave her vivid and disturbing descriptions of his dreams, right up until he was murdered with a strange knife that closely resembled something from one of his nightmares. Disturbed and frightened by his murder, Carolyn dug back through her notes, poring over them late into the night. Finally, she found some subtle clues that led her here, to Arkham, where he was previously an inmate in Arkham Asylum. Someone here has to know why a harmless man was murdered for talking about his dreams to his psychologist."},{image:"DarrellSimonsCard.png",name:"Darrell Simons",profession:"the Photographer",money:4,clues:1,curSanity:4,maxSanity:4,curStamina:6,maxStamina:6,home:"Newspaper",focus:2,specialAbilityTitle:"Hometown Advantage",specialAbilityDescription:"Any Phase: Town Encounter: When drawing location encounters in Arkham, Darrell draws two cards and may choose whichever one of the two he wants. This ability does not work when drawing gate encounters in Other Worlds.",minSpeed:2,minSneak:0,minFight:2,minWill:1,minLore:0,minLuck:1,curSpeed:2,curFight:2,curLore:0,storySoFar:"Even while growing up in Arkham, Darrell always knew that there was something not quite right about the strange little town. After graduating from high school, he went to work for the Arkham Advertiser as a photographer, and in the years since, he's crawled over every square inch of the city. Last night, however, Darrell saw something horrible-- something that has shaken his world to its core and torn away the safe illusions we all foster to protect our minds and our souls. His editor says he was just seeing things, but as he leaves the newspaper building, he knows just what he saw and he intends to show the world! This time he'll be more careful. This time he'll take pictures and prove that things are not normal in Arkham."},{image:"DexterDrakeCard.png",name:"Dexter Drake",profession:"the Magician",money:5,clues:0,curSanity:5,maxSanity:5,curStamina:5,maxStamina:5,home:"Ye Olde Magick Shoppe",focus:2,specialAbilityTitle:"Magical Gift",specialAbilityDescription:'Any Phase: Whenever "The Great" Drake draws one or more cards from the Spell deck, he draws one extra card and then discards one of the cards.',minSpeed:2,minSneak:1,minFight:1,minWill:0,minLore:2,minLuck:0,curSpeed:2,curFight:1,curLore:2,storySoFar:" After returning from his stint in the army during WWI, Dexter became a stage magician, and proved to be very successful at his trade, but he always longed to find real magic. As they say, be careful what you wish for. Years later, in a rundown store, Dexter came across a burnt and torn fragment of the Necronomicon itself. Intrigued by this ancient piece of occult knowledge, Dexter began to use his wealth in search of the truth about the ancient lore, and what he found horrified him. Now, the more he learns, the less he wants to know, but his studies have led him to believe that a great evil will soon arise in Arkham. He knows that he may well be the only person with the ability to stop this evil from swallowing the world, so he has come to that sleepy town to speak with the proprietor of Ye Olde Magick Shoppe, one of the few magic shops that contain true lore, and not merely the stage tricks he once studied."},{image:"GloriaGoldbergCard.png",name:"Gloria Goldberg",profession:"the Author",money:7,clues:2,curSanity:6,maxSanity:6,curStamina:4,maxStamina:4,home:"Velma's Diner",focus:2,specialAbilityTitle:"Psychic Sensitivity",specialAbilityDescription:"Other World Encounter: When drawing gate encounters in Other Worlds, Gloria draws two cards that match the color of one of the Other World's encounter symbols, then chooses whichever one of the two she wants. This ability does not work when drawing location encounters in Arkham.",minSpeed:1,minSneak:3,minFight:0,minWill:2,minLore:1,minLuck:2,curSpeed:1,curFight:0,curLore:1,storySoFar:"As a young girl, Gloria was haunted by terrible visions. After years of visiting doctors and some therapy, she learned to control her visions somewhat by writing stories. Her weird and disturbing fiction somehow spoke to the public in these troubled times, and has made her a bestselling writer. This evening, while leaving a book signing she's attending in Arkham, she was knocked to the ground by the most powerful vision she's ever experienced. Gloria saw the sky tear open, and a huge and montrous form pour out of the very air itself, wreaking untold havoc and killing thousands. As she sat on the ground with her arms wrapped around herself, Gloria knew, somehow, that this vision was real, and that it would come to pass unless she did something about it. Now, she finds herself in a run-down diner, sipping coffee and trying to decide what to do."},{image:"HarveyWaltersCard.png",name:"Harvey Walters",profession:"the Professor",money:5,clues:1,curSanity:7,maxSanity:7,curStamina:3,maxStamina:3,home:"Administration Building",focus:2,specialAbilityTitle:"Strong Mind",specialAbilityDescription:"Any Phase: Harvey reduces all Sanity losses he suffers by 1, to a minimum of 0.",minSpeed:0,minSneak:2,minFight:0,minWill:0,minLore:3,minLuck:1,curSpeed:0,curFight:0,curLore:3,storySoFar:"Harvey is a visiting Professor at Miskatonic University. With Doctorates in History and Archaeology, he has uncovered several interesting artifacts over the years and learned a little of the arcane arts. Recently, by carefully studying the papers and talking to people in the streets, he has begun to detect a disturbance in the city-- something that could potentially herald the arrival of something unthinkable from beyond time and space. Checking his notes, Professor Walters prepares himself for one last trip into the streets of Arkham to confirm his theory. If he's right, it could spell the end of everything."},{image:"JennyBarnesCard.jpg",name:"Jenny Barnes",profession:"the Dilettante",money:10,curSanity:6,maxSanity:6,curStamina:4,maxStamina:4,clues:0,home:"Train Station",focus:2,specialAbilityTitle:"Trust Fund",specialAbilityDescription:"Upkeep: Jenny gains $1",minSpeed:0,minSneak:1,minFight:1,minWill:2,minLore:1,minLuck:2,curSpeed:1,curFight:1,curLore:1,storySoFar:"Several months ago, Jenny was visiting Paris when she received a letter from her sister, Isabelle. In it, Isabelle rambled incoherantly, writing about men in dark cloaks following her wherever she went, and of hoofprints in the woods, left by an enormous goat. The outside of the envelope was partailly stained with blood, and it was mailed from Arkham. That was the last letter from Isabelle she received. Jenny has since returned to the States, coming to Arkham to find her missing sister. Stepping off the train from Boston into the dark autumn night, she believes that her sister was abducted by a strange cult, and is determined to find her and thwart the plans of those that took her... even if she has to save all of Arkham in the process."},{image:"JoeDiamondCard.png",name:"Joe Diamond",profession:" the Private Eye",money:8,clues:3,curSanity:4,maxSanity:4,curStamina:6,maxStamina:6,home:"Police Station",focus:3,specialAbilityTitle:"Hunches",specialAbilityDescription:"Any Phase: Joe rolls one extra bonus die when he spends a Clue token to add to a roll.",minSpeed:3,minSneak:1,minFight:2,minWill:0,minLore:0,minLuck:0,curSpeed:3,curFight:2,curLore:0,storySoFar:"The job sounded simple enough-- pick up a statue at the Providence Museum and deliver it to a guy at the Silver Twilight Lodge. The money was good, and the dame who gave him the job seemed sincere. Sadly, things never seem to work out that easily for Joe. Now the statue is missing, two people are dead, strange cultists are on his tail, and all clues lead to Arkham. Lady Luck can be funny that way. He's already tried talking to the Sheriff, but that flatfoot proved to be worse than useless. Looks like it's once again going to be up to Joe Diamond to solve the case."},{image:"KateWinthropCard.png",name:"Kate Winthrop",profession:"the Scientist",money:7,clues:2,curSanity:6,maxSanity:6,curStamina:4,maxStamina:4,home:"Science Building",focus:1,specialAbilityTitle:"Science!",specialAbilityDescription:"Any Phase: Gates and monsters cannot appear in Kate's location due to her flux stabilizer. Monsters and gates do not disappear if she enters their location, however, and monsters can move into her location as usual.",minSpeed:1,minSneak:2,minFight:1,minWill:4,minLore:2,minLuck:1,curSpeed:1,curFight:1,curLore:2,storySoFar:"A brilliant researcher, but a shy, lonely person, Kate Winthrop has been working at the Miskatonic Science Labs for 4 years now and her supervisor still doesn't know her name. That doesn't matter to her though, as she has been working to complete a private quest for most of that time. Almost 3 years ago, she watched as a device malfunctioned, and Professor Young, her long-time mentor and friend, was torn apart by an indistinct creature that shrieked and gibbered before vanishing into the night. Since then, she has delved into darker scientific studies, always hoping to find something that would allow her to find and defeat that creature along with others of its kind. Tonight, her research has finally paid off, allowing her to create a device that can defeat the alien beings she has detected in Arkham!"},{image:"MandyThompsonCard.png",name:"Mandy Thompson",profession:"the Researcher",money:7,clues:4,curSanity:5,maxSanity:5,curStamina:5,maxStamina:5,home:"Library",focus:2,specialAbilityTitle:"Research",specialAbilityDescription:"Any Phase: Once per turn, Mandy can activate this ability after any investigator (including herself) makes a skill check. That investigator then re-rolls all of the dice rolled for that check that did not result in successes.",minSpeed:1,minSneak:2,minFight:0,minWill:2,minLore:1,minLuck:0,curSpeed:1,curFight:0,curLore:1,storySoFar:"Mandy came to Arkham several years ago looking for work as a researcher for Miskatonic University. Since then, she has worked with many of the University professors, delving into esoteric tomes filled with scientific information, historical reports, and sometimes even occult ramblings. It was while reading an old book of prophecies last week that she first felt that she had stumbled onto something big. Mandy came to believe that certain signs and portents described in the book were taking place in Arkham right now-- omens that indicated the return of a terrible being reffered to as an Ancient One, which would grind the cities of Man beneath its loathsome tread. Tonight, the full moon has turned blood red, which is the final omen of the return of the Ancient One. Slipping into the night, and armed with her knowledge of the prophecy, Mandy has decided to see if she can defy fate and stop these events from taking place."},{image:"MichaelMcGlenCard.png",name:"Michael McGlen",profession:"the Gangster",money:8,clues:0,curSanity:3,maxSanity:3,curStamina:7,maxStamina:7,home:"Ma's Boarding House",focus:1,specialAbilityTitle:"Strong Body",specialAbilityDescription:"Any Phase: Michael reduces all Stamina losses he suffers by 1, to a minimum of 0.",minSpeed:2,minSneak:1,minFight:3,minWill:1,minLore:0,minLuck:0,curSpeed:2,curFight:3,curLore:0,storySoFar:"As a soldier in the O'Bannion gang, Michael didn't really believe in all this voodoo mumbo jumbo around town. Or at least, he didn't until the night of the Foreman job, when he saw Fast Louie Farrell pulled screaming into the river by a scaly green creature. As they say, seeing is believing and Michael is starting to believe. Now, he has gathered his belongings together in the room that he rents at Ma's Boarding House. Louie was a friend of his, and he won't rest until he finds out what's happening in this town and avenges his buddy ..."},{image:"MontereyJackCard.png",name:"Monterey Jack",profession:"the Archaeologist",money:7,clues:1,curSanity:3,maxSanity:3,curStamina:7,maxStamina:7,home:"Curiositie Shoppe",focus:2,specialAbilityTitle:"Archaeology",specialAbilityDescription:"Any Phase: Whenever Monterey draws one or more cards from the Unique item deck, he draws one extra card and then discards one of the cards.",minSpeed:1,minSneak:0,minFight:2,minWill:0,minLore:1,minLuck:2,curSpeed:1,curFight:2,curLore:2,storySoFar:"Monterey has been a globe-trotting treasure hunter and adventurer for many years. Following in his father's footsteps, he's always tried to ensure that the specific value of his finds is preserved. Recently, he followed a lead on an odd prehistoric statue to Arkham. However, when he arrived, the man he came to buy the statue from was locked up in the asylum. Monterey was just about to give up and go home in disgust when a robed figure pushed past him. For just an instant, there was a flash of a silver pendant with a symbol on it Monterey would never forget. That symbol had been carved into his murdered father's forehead, and had haunted his dreams for years. Chasing after the mysterious figure, he turned a corner only to discover that he had lost his quarry. However, Monterey knows that somewhere in Arkham may lie the answer to the mystery of his father's murder, and he's not leaving until he finds it."},{image:"VincentLeeCard.png",name:"Vincent Lee",profession:"the Doctor",money:9,clues:1,curSanity:5,maxSanity:5,curStamina:5,maxStamina:5,home:"St. Mary's Hospital",focus:2,specialAbilityTitle:"Physician",specialAbilityDescription:"Upkeep: Dr. Lee may restore 1 Stamina to himself or another character in his location. He cannot raise a character's Stamina higher than that character's maximum Stamina.",minSpeed:0,minSneak:2,minFight:0,minWill:1,minLore:2,minLuck:1,curSpeed:0,curFight:0,curLore:2,storySoFar:"A Yale graduate of Medicine, Vincent has recently moved to Arkham from Boston to practice at St. Mary's Hospital. Since his coming to Arkham, he has seen far too many horrible and unexplained deaths - an elderly victim torn apart by unknown wild animals, a healthy young man whose heart exploded, and so many others. Their faces haunt his dreams, especially the young man's terrified expression. After all this, small wonder that Vincent has begun to wonder if there's something sinister going on in this quiet Massachusetts town. Tonight Dr. Lee made the decision to investigate the mysteries of Arkham and stop the strange deaths. He is determined to see this through, even if in so doing he becomes another puzzle for the next doctor who comes to Arkham."},{image:"SisterMaryCard.png",name:"Sister Mary",profession:"the Nun",money:0,clues:0,curSanity:7,maxSanity:7,curStamina:3,maxStamina:3,home:"South Church",focus:1,specialAbilityTitle:"Guardian Angel",specialAbilityDescription:"Any Phase: Sister Mary is never Lost in Time and Space. Instead, if her Sanity is 0, she returns to Arkham Asylum. If her Stamina is 0, she returns to St. Mary's Hospital. If neither her Sanity or her Stamina are 0, she returns to South Church.",minSpeed:1,minSneak:1,minFight:0,minWill:1,minLore:1,minLuck:3,curSpeed:1,curFight:0,curLore:1,storySoFar:"Sister Mary has served the Church faithfully for many years, so when she was sent to Arkham to work with Father Michael, a man whose writings she had admired for many years, she felt that she was truly blessed. Now, after witnessing Father Michael's strange mood swings and seeing some of the bizarre practices that go on in this town, she's beginning to feel that she may have been a bit too hasty ... For instance, last night, there was a knock on the door of the church, and when she answered it, there was nothing but a handwritten journal laying on the steps outside. Reading it, she learned of strange cults and terrible creatures that lurk in the darkness. Worse, when she laughingly showed it to Father Michael, he turned pale and threw it into the fire, yelling at her to forget what she'd seen. Now, gathering her things and quietly leaving South Church, Sister Mary has decided to investigate this town, and in so doing, reaffirm her faith."}]),angular.module("arkhamHelperApp").service("phase",["activeInvestigators",function(a){var b="Mythos",c="Upkeep";this.phases=[c,"Movement","Arkham Encounter","Other World Encounter",b],this.lastPhase=b,this.firstPhase=c,this.counter=0,this.currentPhase=4,this.getCurrentPhase=function(){return this.currentPhase=(this.counter+4)%5,this.phases[this.currentPhase]},this.nextPhase=function(){return this.counter++,this.getCurrentPhase()};var d=a.list;this.getActivePlayers=function(){return d.length},this.firstInvestigator=null,this.currentInvestigator=null,this.nextInvestigatorOrPhase=function(){if(null===this.firstInvestigator)return this.firstInvestigator=d[0],this.currentInvestigator=this.firstInvestigator,void this.nextPhase();var a=d.indexOf(this.firstInvestigator),c=d.indexOf(this.currentInvestigator),e=d.length;return this.getCurrentPhase()===b?(this.nextPhase(),this.firstInvestigator=d[(--a+e)%e],void(this.currentInvestigator=this.firstInvestigator)):(c=(c+1)%e,this.currentInvestigator=d[c],void(c==a&&this.nextPhase()))}}]),angular.module("arkhamHelperApp").controller("PhaseCtrl",["$scope","phase",function(a,b){a.phase=b}]),angular.module("arkhamHelperApp").service("activeInvestigators",["investigatorsData","cardBucket","cardPileCommonItems","cardPileSpells","cardPileSkills","cardPileUnique",function(a,b,c,d,e,f){this.list=[],this.add=function(a){a.commonItems=b("commonItems",c),a.commonItems.draw(),a.commonItems.draw(),a.spells=b("spells",d),a.spells.draw(),a.spells.draw(),a.skillsCards=b("skills",e),a.skillsCards.draw(),a.skillsCards.draw(),a.uniqueItems=b("uniqueItems",f),a.uniqueItems.draw(),a.uniqueItems.draw(),a.availableFocus=a.focus,a.inUse=!0,this.list.push(a)},this.add(a[8]),this.add(a[11])}]),angular.module("arkhamHelperApp").controller("SettingsCtrl",["$scope","investigatorsData","activeInvestigators","_",function(a,b,c,d){a.investigatorsData=b,a.activeList=c.list,a.toggle=function(b){var c=d(a.activeList).find(b);b.inUse=!b.inUse,"undefined"!=typeof c?a.activeList.splice(a.activeList.indexOf(b),1):a.activeList.push(b)}}]),angular.module("arkhamHelperApp").factory("cardBucket",["cardPile",function(a){var b=function(b,c){return this.cardPile=a(),this.list=this.cardPile.list,this.type=b,this.name=b.replace(/^[a-z]|[A-Z]/g,function(a,b){return 0===b?a.toUpperCase():" "+a}),this.imgSubDir=b.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()}),this.externalPile=c,this.add=this.cardPile.add,this.discard=function(a){var b=this.cardPile.removeByName(a);b.exhaust=!1,this.externalPile.push(b)},this.exhaust=function(a){a.exhaust=!0},this.restore=function(a){a.exhaust=!1},this.findByName=function(a){var b=this.cardPile.findByName(a);return b},this.draw=function(){var a=this.externalPile.draw();return a?(this.add(a),a):null},this};return function(a,c){return new b(a,c)}}]),angular.module("arkhamHelperApp").factory("cardPile",["Shuffler",function(a){var b=function(){var b=this;b.list=[],b.add=function(a){b.list.push(a)},b.findByName=function(a){var c=_.find(b.list,function(b){return b.name==a});return c},b.removeByName=function(a){var c=b.findByName(a);return c?(b.list.splice(_.indexOf(b.list,c),1),c):void 0},b.draw=function(){return b.list.shift()},b.push=b.add,b.shuffle=function(c){for(c=1|c;c-->0;)a(b.list)}};return function(){return new b}}]),angular.module("arkhamHelperApp").constant("commonItemsData",[{name:".18 Derringer",price:3,hands:1,image:"18Derringer",quantity:2},{name:".38 revolver",price:4,hands:1,image:"38Revolver",quantity:2},{name:".45 automatic",price:5,hands:1,image:"45Automatic",quantity:2},{name:"Bullwhip",price:5,hands:1,image:"Bullwhip",quantity:2},{name:"Dynamite",price:5,hands:1,image:"Dynamite",quantity:2},{name:"MapOfArkham",price:5,hands:1,image:"MapOfArkham",quantity:2},{name:"Shotgun",price:5,hands:1,image:"Shotgun",quantity:2},{name:"CavalrySaber",price:5,hands:1,image:"CavalrySaber",quantity:2},{name:"Food",price:5,hands:1,image:"Food",quantity:2},{name:"Motorcycle",price:5,hands:1,image:"Motorcycle",quantity:2},{name:"TommyGun",price:5,hands:1,image:"TommyGun",quantity:2},{name:"Knife",price:5,hands:1,image:"Knife",quantity:2},{name:"OldJournal",price:5,hands:1,image:"OldJournal",quantity:2},{name:"Whiskey",price:5,hands:1,image:"Whiskey",quantity:2},{name:"AncientTome",price:5,hands:1,image:"AncientTome",quantity:2},{name:"Cross",price:5,hands:1,image:"Cross",quantity:2},{name:"Lantern",price:5,hands:1,image:"Lantern",quantity:2},{name:"ResearchMaterials",price:5,hands:1,image:"ResearchMaterials",quantity:2},{name:"Axe",price:5,hands:1,image:"Axe",quantity:2},{name:"DarkCloak",price:5,hands:1,image:"DarkCloak",quantity:2},{name:"LuckyCigaretteCase",price:5,hands:1,image:"LuckyCigaretteCase",quantity:2},{name:"Rifle",price:5,hands:1,image:"Rifle",quantity:2}]),angular.module("arkhamHelperApp").service("cardPileCommonItems",["cardPile","commonItemsData",function(a,b){var c,d=a();return angular.forEach(b,function(a){for(var b=a.quantity;b>0;b--)c=angular.copy(a),delete c.quantity,d.add(c)}),d.shuffle(7),d}]),angular.module("arkhamHelperApp").constant("spellItemsData",[{name:"Alchemical Process",casting:"+0",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Arcane Insight",casting:"-4",sanity:"1",hands:"",quantity:"2",expansion:"The King in Yellow"},{name:"Astral Travel",casting:"-1",sanity:"2",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh"},{name:"Astral Travel (Revised)",casting:"-2",sanity:"1",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Bind Monster",casting:"+4",sanity:"2",hands:"2",quantity:"2",expansion:"",image:"BindMonster"},{name:"Bless",casting:"-1",sanity:"2",hands:"",quantity:"1",expansion:"Dunwich Horror"},{name:"Call Ancient One",casting:"-X",sanity:"X",hands:"",quantity:"1",expansion:"The Black Goat of the Woods"},{name:"Call Down the Storm",casting:"+1",sanity:"1",hands:"1",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Call Friend",casting:"+0",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Call the Azure Flame",casting:"+1",sanity:"1",hands:"",quantity:"3",expansion:"The King in Yellow"},{name:"Cloud Memory",casting:"+1",sanity:"0",hands:"",quantity:"3",expansion:"Dunwich Horror"},{name:"Control Gate",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Curse of Darkness",casting:"-1",sanity:"2",hands:"",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Denying the Ancient One",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"Curse of the Dark Pharaoh"},{name:"Denying the Ancient One (Revised)",casting:"-1",sanity:"2",hands:"",quantity:"2",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Dread Curse of Azathoth",casting:"-2",sanity:"2",hands:"2",quantity:"4",expansion:"",image:"DreadCurseOfAzathoth"},{name:"Enchant Weapon",casting:"+0",sanity:"1",hands:"",quantity:"3",expansion:"",image:"EnchantWeapon"},{name:"Feeding the Mind",casting:"-1",sanity:"0",hands:"",quantity:"2",expansion:"Curse of the Dark Pharaoh"},{name:"Feeding the Mind (Revised)",casting:"-2",sanity:"0",hands:"",quantity:"2",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Find Gate",casting:"-1",sanity:"1",hands:"",quantity:"4",expansion:"",image:"FindGate"},{name:"Fist of Yog-Sothoth",casting:"+2",sanity:"1",hands:"1",quantity:"4",expansion:"Kingsport Horror"},{name:"Flesh Ward",casting:"-2",sanity:"1",hands:"",quantity:"4",expansion:"",image:"FleshWard"},{name:"Forced Learning",casting:"-1",sanity:"2",hands:"",quantity:"2",expansion:"Kingsport Horror"},{name:"Foresee",casting:"-1",sanity:"1",hands:"",quantity:"3",expansion:"Dunwich Horror"},{name:"Greater Banishment",casting:"-2",sanity:"2",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Heal",casting:"+1",sanity:"1",hands:"",quantity:"3",expansion:"",image:"Heal"},{name:"Implant Suggestion",casting:"-2",sanity:"0",hands:"",quantity:"2",expansion:"Kingsport Horror"},{name:"Intervene",casting:"-1",sanity:"2",hands:"2",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Lure Monster",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Markings of Isis",casting:"Special",sanity:"0",hands:"1",quantity:"3",expansion:"Curse of the Dark Pharaoh"},{name:"Markings of Isis (Revised)",casting:"Special",sanity:"0",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Mists of Releh",casting:"Special",sanity:"0",hands:"",quantity:"4",expansion:"",image:"MistsOfReleh"},{name:"Open the Third Eye",casting:"+0",sanity:"0",hands:"",quantity:"2",expansion:"The King in Yellow"},{name:"Plague of Locusts",casting:"-2",sanity:"1",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh"},{name:"Plague of Locusts (Revised)",casting:"+0",sanity:"2",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Plumb the Void",casting:"+0",sanity:"2",hands:"",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Premonition",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"Curse of the Dark Pharaoh"},{name:"Red Sign of Shudde M'ell",casting:"-1",sanity:"1",hands:"1",quantity:"2",expansion:"",image:"RedSignOfShuddeMell"},{name:"Revelation of Script",casting:"+1",sanity:"0",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh"},{name:"Revelation of Script (Revised)",casting:"-1",sanity:"0",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Shrivelling",casting:"-1",sanity:"1",hands:"1",quantity:"5",expansion:"",image:"Shrivelling"},{name:"Shroud of Shadow",casting:"-1",sanity:"Special",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh"},{name:"Shroud of Shadow (Revised)",casting:"-2",sanity:"1",hands:"",quantity:"3",expansion:"Curse of the Dark Pharaoh (Revised Edition)"},{name:"Sigil of Hermes Trismegistus",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"The Lurker at the Threshold"},{name:"Spectral Razor",casting:"+2",sanity:"2",hands:"2",quantity:"3",expansion:"Kingsport Horror"},{name:"Steal Life",casting:"-2",sanity:"1",hands:"2",quantity:"2",expansion:"The Black Goat of the Woods"},{name:"Storm of Spirits",casting:"-1",sanity:"0",hands:"2",quantity:"4",expansion:"The King in Yellow"},{name:"Summon Monster",casting:"+0",sanity:"1",hands:"",quantity:"1",expansion:"The Black Goat of the Woods"},{name:"Summon Shantak",casting:"-1",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Summon the Beast Within",casting:"-2",sanity:"0",hands:"",quantity:"2",expansion:"The King in Yellow"},{name:"The Yellow Mist",casting:"-3",sanity:"1",hands:"",quantity:"2",expansion:"The King in Yellow"},{name:"Vision Quest",casting:"+0",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"},{name:"Voice of Ra",casting:"-1",sanity:"1",hands:"",quantity:"3",expansion:"",image:"VoiceOfRa"},{name:"Wither",casting:"0",sanity:"0",hands:"1",quantity:"6",expansion:"",image:"Wither"},{name:"Wrack",casting:"-2",sanity:"1",hands:"",quantity:"2",expansion:"Dunwich Horror"}]),angular.module("arkhamHelperApp").service("cardPileSpells",["cardPile","spellItemsData",function(a,b){var c,d=a();
return angular.forEach(b,function(a){for(var b=a.quantity;b>0;b--)""===a.expansion&&(c=angular.copy(a),delete c.quantity,d.add(c))}),d.shuffle(7),d}]),angular.module("arkhamHelperApp").constant("skillsData",[{name:"Bravery",text:"Any Phase: Exhaust to re-roll a Horror check.",expansion:"",quantity:2,horror:"reroll"},{name:"Expert Occultist",text:"Any Phase: Exhaust to re-roll a Spell check.",expansion:"",quantity:2,spell:"reroll"},{name:"Fight (skill)",text:"When you spend a Clue token to add to any Fight check, add one extra bonus die.",fight:{bonus:"+1"},expansion:"",quantity:2},{name:"Lore (skill)",text:"When you spend a Clue token to add to any Lore check, add one extra bonus die.",luck:{bonus:"+1"},expansion:"",quantity:2},{name:"Luck (skill)",text:"When you spend a Clue token to add to any Luck check, add one extra bonus die.",luck:{bonus:"+1"},expansion:"",quantity:2},{name:"Marksman",text:"Any Phase: Exhaust to re-roll a Combat check.",expansion:"",quantity:2,combat:"reroll"},{name:"Sneak (skill)",text:"When you spend a Clue token to add to any Sneak check, add one extra bonus die.",sneak:{bonus:"+1"},expansion:"",quantity:2},{name:"Speed (skill)",text:"When you spend a Clue token to add to any Speed check, add one extra bonus die.",speed:{bonus:"+1"},expansion:"",quantity:2},{name:"Stealth",text:"Any Phase: Exhaust to re-roll an Evade check.",expansion:"",quantity:2,evade:"reroll"},{name:"Will (skill)",text:"When you spend a Clue token to add to any Will check, add one extra bonus die.",will:{bonus:"+1"},expansion:"",quantity:2},{name:"Ancient Language",expansion:"Kingsport Horror"},{name:"Camouflage",expansion:"Kingsport Horror"},{name:"Clairvoyant",expansion:"Miskatonic Horror: Lurker at the Threshold component"},{name:"Conceal",expansion:"Dunwich Horror"},{name:"Credit Rating",expansion:"Kingsport Horror"},{name:"Criminal",expansion:"Miskatonic Horror: Dunwich Horror component"},{name:"Disguise",expansion:"Kingsport Horror"},{name:"Dodge",expansion:"Dunwich Horror"},{name:"Egyptologist",expansion:"Miskatonic Horror: Curse of the Dark Pharaoh component"},{name:"Endurance",expansion:"Kingsport Horror"},{name:"Fisticuffs",expansion:"Dunwich Horror"},{name:"Grapple",expansion:"Dunwich Horror"},{name:"Hide",expansion:"Dunwich Horror"},{name:"Informant",expansion:"Miskatonic Horror: Innsmouth Horror component"},{name:"Initiate",expansion:"Miskatonic Horror: Black Goat of the Woods component"},{name:"Library Use",expansion:"Dunwich Horror"},{name:"Linguistics",expansion:"Kingsport Horror"},{name:"Listen",expansion:"Kingsport Horror"},{name:"Martial Arts",expansion:"Kingsport Horror"},{name:"Mental Fortitude",expansion:"Kingsport Horror"},{name:"Mystic Gift",expansion:"Dunwich Horror"},{name:"Mythos Lore",expansion:"Dunwich Horror"},{name:"Painter",expansion:"Miskatonic Horror: Kingsport Horror component"},{name:"Performer",expansion:"Miskatonic Horror: King in Yellow component"},{name:"Persuade",expansion:"Kingsport Horror"},{name:"Psychology",expansion:"Dunwich Horror"},{name:"Run",expansion:"Kingsport Horror"},{name:"Spot Hidden",expansion:"Dunwich Horror"},{name:"Strong Will",expansion:"Dunwich Horror"},{name:"Wrestle",expansion:"Kingsport Horror"}]),angular.module("arkhamHelperApp").service("cardPileSkills",["cardPile","skillsData",function(a,b){var c,d=a();return angular.forEach(b,function(a){for(var b=a.quantity;b>0;b--)""===a.expansion&&(c=angular.copy(a),delete c.quantity,d.add(c))}),d.shuffle(7),d}]),angular.module("arkhamHelperApp").constant("uniqueItemsData",[{name:"Alien Statue",price:"5",phase:"Movement",text:"Movement: Exhaust and spend 2 movement points and 1 Sanity to roll a die. If the die is a success, draw 1 Spell or gain 3 Clue tokens. If it is a failure, lose 2 Stamina.",quantity:1},{name:"Ancient Tablet",price:8,phase:"Movement",text:"Movement: Spend 3 movement points and discard Ancient Tablet to roll 2 dice. For every success rolled, draw 1 Spell. For every failure rolled, gain 2 Clue tokens.",quantity:1},{name:"Blue Watcher of the Pyramid",price:4,phase:"Any",text:"Any Phase: Lose 2 Stamina and discard Blue Watcher of the Pyramid to automatically succeed at a Combat check or a Fight check or Lore check made to close a gate. This cannot be used against an Ancient One.",quantity:1},{name:"Book of Dzyan",price:3,phase:"Movement",text:"Movement: Exhaust and spend 2 movement points to make a Lore (-1) check. If you pass, draw 1 Spell, lose 1 Sanity, and put 1 Stamina token from the bank on Book of Dzyan. If there are 2 Stamina tokens on it, discard Book of Dzyan. If you fail, nothing happens.",type:"tome",quantity:1},{name:"Cabala of Saboth",price:5,phase:"Movement",text:"Movement: Exhaust and spend 2 movement points to make a Lore (-2) check. If you pass, draw 1 Skill and discard Cabala of Saboth. If you fail, nothing happens.",type:"tome",quantity:2},{name:"Cultes des Goules",price:3,phase:"Movement",text:"Movement: Exhaust and spend 2 movement points to make a Lore (-2) check. If you pass, draw 1 Spell and gain 1 Clue token, but lose 2 Sanity and discard Cultes Des Goules. If you fail, nothing happens.",type:"tome",quantity:2},{name:"Dragon's Eye",price:6,phase:"Any",text:"Any phase: Exhaust and lose 1 Sanity after drawing a gate or location card to draw a new card in its place.",type:"",quantity:1},{name:"Elder Sign",price:5,phase:"Any",text:"Any Phase: When sealing a gate, lose 1 Stamina and 1 Sanity and return this card to the box. You do not need to make a skill check or spend any Clue tokens to seal the gate. In addition, remove one doom token from the Ancient One's doom track.",type:"",quantity:2},{name:"Enchanted Blade",price:6,phase:"",text:"Bonus: +4 Combat check",combat:"+4",hands:1,type:"Magical Weapon",quantity:2},{name:"Enchanted Jewelry",price:3,text:"Any Phase: Put 1 Stamina token from the bank on Enchanted Jewelry to avoid losing 1 Stamina. If there are 3 Stamina tokens on it, discard Enchanted Jewelry.",phase:"Any",type:"",quantity:1},{name:"Enchanted Knife",price:5,phase:"",text:"Bonus: +3 Combat Check",type:"Magical Weapon",quantity:2,combat:"+3",hands:1},{name:"Flute of the Outer Gods",price:8,phase:"Any",text:"Any Phase: Lose 3 Sanity and 3 Stamina and discard Flute of the Outer Gods before making a Combat check to defeat all monsters in your current area. This does not affect Ancient Ones. [You must pass a Horror Check before using the Flute. If there are more than one monster in your area, you only need to pass one Horror Check.]",type:"",quantity:1},{name:"Gate Box",price:4,phase:"Any",text:"Any Phase: When you return to Arkham from an Other World, you can return to any location with an open gate, not just those leading to the Other World you were in.",type:"",quantity:1},{name:"Healing Stone",price:8,phase:"Upkeep",text:"Upkeep: You may gain 1 Stamina or 1 Sanity.  Discard Healing Stone if the Ancient One awakens.",type:"",quantity:1},{name:"Holy Water",price:4,phase:"",text:"Bonus: +6 Combat check (Discard after use)",combat:{bonus:1},hands:2,discard:!0,type:"Magical Weapon",quantity:4},{name:"Lamp of Alhazred",price:7,phase:"",text:"Bonus: +5 Combat check",hands:2,combat:{bonus:5},type:"Magical Weapon",quantity:1},{name:"Nameless Cults",price:3,phase:"Movement",text:"Movement: Exhaust and spend 1 movement point to make a Lore (-1) check. If you pass, draw 1 Spell, lose 1 Sanity, and discard Nameless Cults. If you fail, nothing happens.",type:"Tome",quantity:2},{name:"Necronomicon",price:6,phase:"Movement",text:"Movement: Exhaust and spend 2 movement points to make a Lore (-2) check. If you pass, draw 1 Spell and lose 2 Sanity. If you fail, nothing happens.",type:"Tome",quantity:1},{name:"Obsidian Statue",price:4,phase:"Any",text:"Any Phase: Discard Obsidian Statue to cancel all Stamina or Sanity loss being dealt to you from one source.",type:"",quantity:1},{name:"Pallid Mask",price:4,phase:"",evade:{bonus:2},text:"Bonus: +2 Evade check",type:"",quantity:1},{name:"Powder of Ibn-Ghazi",price:6,phase:"",text:"Bonus: +9 Combat check. Discard After use and lose 1 sanity",combat:{bonus:9},discard:!0,cost:{sanity:1},hands:2,type:"Magical Weapon",quantity:2},{name:"Ruby of R'lyeh",price:8,phase:"Movement",text:"Movement: You get 3 extra movement points",type:"",quantity:1},{name:"Silver Key",price:4,phase:"",text:"Any Phase: Put 1 Stamina token from the bank on Silver Key before making an Evade check to automatically pass it. Discard Silver Key after using it if there are 3 Stamina tokens on it.",type:"",quantity:1},{name:"Sword of Glory",price:8,phase:"",text:"Bonus: +6 Combat check",hands:2,combat:{bonus:6},type:"Magical Weapon",quantity:1},{name:"The King in Yellow",price:2,phase:"Movement",text:"Movement: Exhaust and spend 2 movement points to make a Lore (-2) check. If you pass, gain 4 Clue tokens, lose 1 Sanity and discard The King in Yellow. If you fail nothing happens.",type:"Tome",quantity:2},{name:"Warding Statue",price:6,phase:"Any",text:"Any Phase: Discard Warding Statue after failing a Combat check to reduce the monster's combat damage to 0 Stamina. This can also be used to cancel an Ancient One's entire attack for 1 turn.",type:"",quantity:1}]),angular.module("arkhamHelperApp").service("cardPileUnique",["cardPile","uniqueItemsData",function(a,b){var c,d=a();return angular.forEach(b,function(a){a.image=a.name,a.image=a.image.replace(/ (.)/g,function(a,b){return b.trim().toUpperCase()}).replace(/[ '-]/g,"");for(var b=a.quantity;b>0;b--)c=angular.copy(a),delete c.quantity,d.add(c)}),d.shuffle(7),d}]),angular.module("arkhamHelperApp").directive("miniCard",function(){return{templateUrl:"views/templates/miniCardDirective.html",restrict:"E",scope:{cards:"="},link:function(){}}});